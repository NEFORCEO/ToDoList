# TODO API

FastAPI приложение для управления задачами (TODO) с асинхронной базой данных SQLite.

## Возможности

- **Создание задачи** - Добавление новой задачи с заголовком и описанием
- **Просмотр всех задач** - Получение списка всех задач
- **Обновление задачи** - Частичное обновление заголовка задачи
- **Удаление задачи** - Удаление задачи по ID

## Стек технологий

- **FastAPI** - Веб-фреймворк для создания API
- **SQLAlchemy** - ORM для работы с базой данных
- **aiosqlite** - Асинхронный драйвер для SQLite
- **Pydantic** - Валидация данных и сериализация
- **Uvicorn** - ASGI сервер для запуска приложения

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <https://github.com/NEFORCEO/ToDoList.git
cd <имя вашей папки>
```

### 2. Установка зависимостей

Установите все необходимые зависимости из файла `req.txt`:

```bash
pip install -r req.txt
```


## Документация API

После запуска приложения документация будет доступна по следующим адресам:

- **Swagger UI**: `http://127.0.0.1:8000/docs`
- **ReDoc**: `http://127.0.0.1:8000/redoc`

## Эндпоинты API

### 1. Создание задачи

**POST** `/todo/create/task`

Создает новую задачу. Заголовок должен быть уникальным.

**Тело запроса:**
```json
{
  "title": "string",
  "task_name": "string"
}
```

**Ответ:**
```json
{
  "status": 200,
  "id": 1,
  "title": "string",
  "task_name": "string"
}
```

**Ошибки:**
- `409 Conflict` - Задача с таким заголовком уже существует

### 2. Получение всех задач

**GET** `/todo/read`

Возвращает список всех задач.

**Ответ:**
```json
{
  "status": 200,
  "result": [
    {
      "id": 1,
      "title": "string",
      "task_name": "string"
    }
  ]
}
```

### 3. Обновление задачи

**PATCH** `/put/patch/task/{id}`

Частично обновляет задачу по ID. В данный момент можно обновить только заголовок.

**Параметры URL:**
- `id` (int) - ID задачи для обновления

**Тело запроса:**
```json
{
  "title": "string"
}
```

**Ответ:**
```json
{
  "status": 200,
  "title": "string"
}
```

**Ошибки:**
- `404 Not Found` - Задача с указанным ID не найдена

### 4. Удаление задачи

**DELETE** `/delete/delete/task/`

Удаляет задачу по ID.

**Тело запроса:**
```json
{
  "id": 1
}
```

**Ответ:**
```json
{
  "status": 200,
  "result": "Успешно"
}
```

**Ошибки:**
- `404 Not Found` - Задача с указанным ID не найдена

## Структура проекта

```
.
├── client/                 # Клиентские утилиты и конфигурация
│   ├── config/
│   │   └── config.py       # Конфигурация приложения
│   └── run.py              # Управление жизненным циклом приложения
├── database/               # Работа с базой данных
│   ├── db.py               # Модель SQLAlchemy и настройки БД
│   └── model/
│       └── models.py       # Сессии и инициализация БД
├── routers/                # Роутеры API
│   ├── delete_router.py    # Эндпоинты удаления
│   ├── get_router.py       # Эндпоинт получения задач
│   ├── post_router.py      # Эндпоинт создания задачи
│   └── put_router.py       # Эндпоинт обновления задачи
├── schemas/                # Pydantic схемы
│   ├── create_task/
│   │   └── create_task.py  # Схема для создания задачи
│   ├── delete_schema/
│   │   └── delete_schema.py # Схема для удаления задачи
│   ├── patch_schema/
│   │   └── patch_schema.py # Схема для обновления задачи
│   └── return_schema.py    # Схемы ответов API
├── main.py                 # Основной файл приложения
├── req.txt                 # Зависимости Python
└── README.md               # Этот файл
```

## База данных

Приложение использует SQLite базу данных с асинхронным доступом. База данных автоматически создается при первом запуске приложения.

**Модель задачи:**
- `id`: Первичный ключ (автоинкремент)
- `title`: Заголовок задачи (строка, с индексом)
- `task_name`: Описание задачи (строка, с индексом)